### 最近的一点感悟

#### XGBoost和结构化数据
> 昨天使用XGboost在结构化数据集上训练，意外地发现效果还不错，和只使用序列信息地LSTM的效果十分接近，而且虽然都有对负样例预测不准的问题，但是将正样例错分为负样例的几率大大降低了。除此以外的部分，LSTM在最后散点图上显示的相关度是超过使用XGBoost的。  
#### ngram分词的一些问题
> 最近的几次实验中都显示了一些反直觉的结果，排除设置和代码的问题不谈，按理说多肽的抗菌性应该和其基团有关，也就是氨基酸序列片段，所以采用ngram的方法，理论上应该能提升模型的表现。但从实验结果表明，ngram=1的时候效果反而是最好的。  
#### XGBoost和LSTM模型的一些比较
> xgboost随着深度的增加，结果越来越接近LSTM版本，无论是MSE还是最后测试集上的结果分布。非常吊诡的是，修改参数对最终的结果影响很小，层数一路从4加到15，性能没有显著变化，n_estimator从100加到500，也没啥反应。  
#### 数据集的问题
还有就是数据集的问题，现在演化的版本太多了
> 单位不同，分化成两类ug和uM  
> 除了单位不同还有3种取值方式: 原始值；log2;log10
负样例部分倒是没什么问题，都上就是了
> 正样例部分也有三个版本;
> 1. 一个是以数据数量出发，只要在原来数据集出现过，不管是不是符合alpha螺旋的要求，都算上(这里取的是所有记录的均值，不管样本)，总共6700条
> 2. 第二个是选用其中有这次的目标菌种-金色葡萄球菌的记录，然后对重复的记录取均值，总共4200条
> 3. 第三个是完全根据筛选要求，包括α螺旋，半胱氨酸等要求，总共2300条  
要是算上掺杂的负样例的比例的话，按照1：1 ；1：2；1：4；1：8 掺杂
总的数据集的量就到20个了
	
负样例那边统一赋值还可以有多个版本，换单位之前还是之后统一赋值也是要考虑的

#### 接下来的思路	
现在思路也有很多种
	
大致分为两条线吧
> 一条是使用序列信息
> 一条是沿袭之前的技术路线，用结构化的数据集(这样也算结合了生物那边的专业领域)
	
这样可以想的模型组合就有很多种
> 结合之前的classifier模型的表现(auc 0.97)
	
可以先一个classifier筛选数据，再一个regressor预测数据
classifier使用序列信息，regressor使用结构化信息
classifier训练使用正负样例都包括，regressor只使用正样例训练
或者根据实验的结果，选择分类器和回归器的基模型
	
还有一种思路就是
> stack方法，综合多种模型的预测结果，提升训练结果的准确度
	
还可以在训练过程中同时使用序列信息和结构化信息，定制一个网络结构，这个暂时还没有具体的idea
	 
最后还有一个问题，就是放到最后的预测的时候，是像之前一样训练一堆的模型，每个序列都有一堆预测值，均值和方差以及tradeoff作为最后选择的标准
	
亦或是一锤子买卖，预测一轮就是最后的结果。
	
现在有一个猜测，就是分类问题上LSTM之类的模型使用序列信息更适合，具体的回归问题上XGBoost这类梯度模型可能更好？
感觉之前看的论文里对这方面都没什么讨论，对数据集的预处理方面考虑的也没有那么多(尤其是潜在的数据误差方面)


#### 目前的打算
谋而后动，先暂时不要管那么多idea, 把当前已有的东西整理一下
数据集部分
> 先把主要会用到的文件整理一下
> negative_samples.csv  ["sequence","MIC":8196,"type":0] 把所有的带有特殊氨基酸的都删去  

> positive_samples_6700.csv  ["sequence","MIC":均值,"type":1] 所有在grampa数据集中出现过的多肽序列都算上  

> positive_samples_2300.csv  ["sequence","MIC":均值,"type":1] 满足最苛刻需求的，完全贴合本次任务的数据  

> positive_samples_4300.csv ["sequence","MIC":均值,"type":1] 满足实验菌种为金色葡萄球菌的样本  
剩下来的就是各种排列组合了
> negative_samples_features.csv  

> positive_samples_6700_features.csv  

> positive_samples_2300_features.csv  

> positive_samples_4300_features.csv  
加上feature的数据
学长那边给的换单位的数据和对应数据集进行一下效果的对比就行了

模型部分,4个模型
> classifier_xgboost  

> classifier_lstm  

> regressor_xgboost  

> regressor_xgboost

log文件部分
> 每次写入的文件命名方式统一为  (模型名)-(任务)-(时间).log  

> 内容统一为 参数信息+混淆矩阵的各种auc(分类任务)/MSE 和 R^2(回归任务)  

> 每次训练存储散点图以及训练的loss下降图